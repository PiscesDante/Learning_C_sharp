# 第5章 方法和参数

## 5.1 方法的调用

方法 **组合一系列语句以执行特定的操作或者计算特定的结果** 。

```C#
// 代码清单 5.1 语句组合成为方法
public class LineCount
{
    public static void Main(string[] args)
    {
        DisplayHelpText();
        string files = GetFiles();
        int lineCount = CountLines(files);
        DisplayLineCount(lineCount);
    }
}
```

> **设计规范** ：要为方法名使用动词或者动词短语。

方法总是和类型关联。类型将相关的方法分成一组。

方法通过 **实参** 接收数据，实参由 方法的参数 或者 **形参** 定义。 **参数** 是 **<u>调用者用于向被调用的方法传递数据的变量</u>** 。

```C#
// 代码清单 5.2 简单方法调用
public class HeyYou
{
    public static void Main(string[] args)
    {
        System.Console.WriteLine("Hey You!");
        System.Console.Write("Enter your first name: ");
        string firstName = System.Console.ReadLine();
        System.Console.Write("Enter your last name: ");
        string lastName = System.Console.ReadLine();
        System.Console.WriteLine($"Your full name: { firstName } { lastName }");
    }
}
```

**方法调用** 由 **方法名称** 和 **实参列表** 构成。完全限定的方法名称包括：**命名空间** 、**类型名称** 和 **方法名称** ，每个部分使用 **点运算符（ `.` ）** 分隔。

### 5.1.1 命名空间

命名空间是一种分类机制，用于分组功能相关的所有类型。主要用命名空间按功能领域组织类型，以便查找和理解这些类型。并且还有助于防范类型名称冲突。

假定要调用的方法和发出调用的方法在同一个命名空间，就没必要指定命名空间。

> **设计规范** ：
> * 要为命名空间使用 `PascalCase` 大小写。
> * 考虑组织源代码文件目录结构以匹配命名空间层次结构。

### 5.1.2 类型名称

调用静态方法时，如目标方法和调用者不在同一个类型或者基类中，就需要添加 **类型名称限定符** 。

### 5.1.3 作用域

一个事物的 **作用域** 是 **<u>可用非限定名称引用它的那个区域</u>** 。

### 5.1.4 方法名称

### 5.1.5 形参和实参

方法可以获取任意数量的形参，每个形参都具有特定的数据类型。调用者为形参提供的值称为实参，每个实参都要和一个形参对应。

### 5.1.6 方法返回值

可以利用返回值将调用方法所产生的结果返回给调用者。

```C#
// 代码清单 5.3 将方法返回值作为实参传给另一个方法调用
public class Program
{
    public static void Main(string[] args)
    {
        System.Console.Write("Enter your first name: ");
        System.Console.WriteLine("Hello {0}!", System.Console.ReadLine());
    }
}
```

### 5.1.7 对比语句和方法调用

**语句通常包含一个或者多个表达式** 。方法调用构成了语句的不同部分。

> **设计规范** ：通常开发者应当侧重于代码的可读性，而不是在写更短的代码上耗费心机。

## 5.2 方法的声明

```C#
// 代码清单 5.4 声明方法
using System;

public class IntroducingMethods
{
    public static void Main(string[] args)
    {
        Console.WriteLine("Hey You!");
        string firstName = GetUserInput("Enter your first name: ");
        string lastName = GetUserInput("Enter your last name: ");
        string fullName = GetFullName(firstName, lastName);
        string initials = GetInitials(firstName, lastName);
        DisplayGreeting(fullName, initials);
    }

    public static string GetUserInput(string prompt)
    {
        Console.Write(prompt);
        return Console.ReadLine();
    }

    public static string GetFullName(string firstName, string lastName)
        => $"{ firstName } { lastName }";

    public static string GetInitials(string firstName, string lastName)
        => $"{ firstName[0] }. { lastName[0] }";

    public static void DisplayGreeting(string fullName, string initials)
    {
        Console.WriteLine($"Hello, { fullName }, your initials is { initials }");
    }
}

// Hey You!
// Enter your first name: Inigo
// Enter your last name: Montoya
// Hello, Inigo Montoya, your initials is I. M
```

C# 不支持全局方法，一切都必须在一个类型声明中。

将一组语句转移到一个方法当中，而不是将其全部暴露在 `Main` 方法里面，本质上是一种重构形式。

### 5.2.1 参数声明

可以在方法声明的圆括号中添加 **参数列表** 。列表中的每个参数都包含 **参数类型** 和 **参数名称** ，并且以逗号运算符进行分隔。

大多数参数的行为和命名规范与局部变量一致。所以参数名采用 `camelCase` 大小写形式。并且方法内部不能出现和形参同名的局部变量。

> **设计规范** ：要为参数名使用 `camelCase` 大小写。

### 5.2.2 方法返回类型声明

`return` 关键字后面的表达式必须兼容方法的返回值类型。

如果方法有返回类型，那么其主体必须有 **不可到达的结束点** 。也就是 **方法不能在不返回任何值的情况下碰到大括号而自然结束** 。

```C#
// 代码清单 5.5 方法中间的 return 语句
public class Program
{
    public static bool MyMethod()
    {
        string command = ObtainCommand();
        switch (command) {
            case "quit" :
                return false;
            default :
                return true;
        }
    }
}
```

